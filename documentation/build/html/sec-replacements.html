

<!DOCTYPE html>
<html class="writer-html4" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>7. The -r, -rv and -rr switches &mdash; latexindent.pl 3.13 documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/proof.css" type="text/css" />
  <link rel="stylesheet" href="_static/latexindent.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
        <script type="text/javascript" src="_static/proof.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="8. The –lines switch" href="sec-the-line-switch.html" />
    <link rel="prev" title="6. The -m (modifylinebreaks) switch" href="sec-the-m-switch.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> latexindent.pl
          

          
          </a>

          
            
            
              <div class="version">
                3.13
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
    
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="sec-introduction.html">1. Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="sec-demonstration.html">2. Demonstration: before and after</a></li>
<li class="toctree-l1"><a class="reference internal" href="sec-how-to-use.html">3. How to use the script</a></li>
<li class="toctree-l1"><a class="reference internal" href="sec-indent-config-and-settings.html">4. indentconfig.yaml, local settings and the -y switch</a></li>
<li class="toctree-l1"><a class="reference internal" href="sec-default-user-local.html">5. defaultSettings.yaml</a></li>
<li class="toctree-l1"><a class="reference internal" href="sec-the-m-switch.html">6. The -m (modifylinebreaks) switch</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">7. The -r, -rv and -rr switches</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#introduction-to-replacements">7.1. Introduction to replacements</a></li>
<li class="toctree-l2"><a class="reference internal" href="#the-two-types-of-replacements">7.2. The two types of replacements</a></li>
<li class="toctree-l2"><a class="reference internal" href="#examples-of-replacements">7.3. Examples of replacements</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="sec-the-line-switch.html">8. The –lines switch</a></li>
<li class="toctree-l1"><a class="reference internal" href="sec-fine-tuning.html">9. Fine tuning</a></li>
<li class="toctree-l1"><a class="reference internal" href="sec-conclusions-know-limitations.html">10. Conclusions and known limitations</a></li>
<li class="toctree-l1"><a class="reference internal" href="references.html">11. References</a></li>
<li class="toctree-l1"><a class="reference internal" href="appendices.html">12. Appendices</a></li>
</ul>

            
          
    <a href="genindex.html">Index</a>
  
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">latexindent.pl</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>7. The -r, -rv and -rr switches</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/sec-replacements.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="the-r-rv-and-rr-switches">
<span id="sec-replacements"></span><h1>7. The -r, -rv and -rr switches<a class="headerlink" href="#the-r-rv-and-rr-switches" title="Permalink to this headline">¶</a></h1>
<p>You can instruct <code class="docutils literal notranslate"><span class="pre">latexindent.pl</span></code> to perform replacements/substitutions on your file by using any of the <code class="docutils literal notranslate"><span class="pre">-r</span></code>, <code class="docutils literal notranslate"><span class="pre">-rv</span></code> or <code class="docutils literal notranslate"><span class="pre">-rr</span></code> switches:</p>
<ul class="simple" id="index-0">
<li>the <code class="docutils literal notranslate"><span class="pre">-r</span></code> switch will perform indentation and replacements, not respecting verbatim code blocks;</li>
<li>the <code class="docutils literal notranslate"><span class="pre">-rv</span></code> switch will perform indentation and replacements, and <em>will</em> respect verbatim code blocks;</li>
<li>the <code class="docutils literal notranslate"><span class="pre">-rr</span></code> switch will <em>not</em> perform indentation, and will perform replacements not respecting verbatim code blocks.</li>
</ul>
<p>We will demonstrate each of the <code class="docutils literal notranslate"><span class="pre">-r</span></code>, <code class="docutils literal notranslate"><span class="pre">-rv</span></code> and <code class="docutils literal notranslate"><span class="pre">-rr</span></code> switches, but a summary is given in <a class="reference internal" href="#tab-replacementswitches"><span class="std std-numref">Table 4</span></a>.</p>
<span id="tab-replacementswitches"></span><table border="1" class="docutils" id="id1">
<caption><span class="caption-number">Table 4 </span><span class="caption-text">The replacement mode switches</span><a class="headerlink" href="#id1" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="19%" />
<col width="33%" />
<col width="47%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">switch</th>
<th class="head">indentation?</th>
<th class="head">respect verbatim?</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">-r</span></code></td>
<td>yes</td>
<td>no</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">-rv</span></code></td>
<td>yes</td>
<td>yes</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">-rr</span></code></td>
<td>no</td>
<td>no</td>
</tr>
</tbody>
</table>
<p>The default value of the <code class="docutils literal notranslate"><span class="pre">replacements</span></code> field is shown in <a class="reference internal" href="#lst-replacements"><span class="std std-numref">Listing 471</span></a>; as with all of the other fields, you are encouraged to customise and change this as you see fit. The options
in this field will <em>only</em> be considered if the <code class="docutils literal notranslate"><span class="pre">-r</span></code>, <code class="docutils literal notranslate"><span class="pre">-rv</span></code> or <code class="docutils literal notranslate"><span class="pre">-rr</span></code> switches are active; when discussing YAML settings related to the replacement-mode switches, we will use the style given in
<a class="reference internal" href="#lst-replacements"><span class="std std-numref">Listing 471</span></a>.</p>
<div class="literal-block-wrapper docutils container" id="lst-replacements">
<div class="code-block-caption"><span class="caption-number">Listing 471 </span><span class="caption-text"><code class="docutils literal notranslate"><span class="pre">replacements</span></code></span><a class="headerlink" href="#lst-replacements" title="Permalink to this code">¶</a></div>
<div class="replaceyaml highlight-default notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>618
619
620
621
622
623
624
625
626</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="n">replacements</span><span class="p">:</span>
  <span class="o">-</span> 
    <span class="n">amalgamate</span><span class="p">:</span> <span class="mi">1</span>
  <span class="o">-</span>
    <span class="n">this</span><span class="p">:</span> <span class="s1">&#39;latexindent.pl&#39;</span>
    <span class="n">that</span><span class="p">:</span> <span class="s1">&#39;pl.latexindent&#39;</span>
    <span class="n">lookForThis</span><span class="p">:</span> <span class="mi">0</span>
    <span class="n">when</span><span class="p">:</span> <span class="n">before</span>

</pre></div>
</td></tr></table></div>
</div>
<p>The first entry within the <code class="docutils literal notranslate"><span class="pre">replacements</span></code> field is <code class="docutils literal notranslate"><span class="pre">amalgamate</span></code>, and is <em>optional</em>; by default it is set to 1, so that replacements will be amalgamated from each settings file that you specify. As
you’ll see in the demonstrations that follow, there is no need to specify this field.</p>
<p>You’ll notice that, by default, there is only <em>one</em> entry in the <code class="docutils literal notranslate"><span class="pre">replacements</span></code> field, but it can take as many entries as you would like; each one needs to begin with a <code class="docutils literal notranslate"><span class="pre">-</span></code> on its own line.</p>
<div class="section" id="introduction-to-replacements">
<h2>7.1. Introduction to replacements<a class="headerlink" href="#introduction-to-replacements" title="Permalink to this headline">¶</a></h2>
<p>Let’s explore the action of the default settings, and then we’ll demonstrate the feature with further examples. With reference to <a class="reference internal" href="#lst-replacements"><span class="std std-numref">Listing 471</span></a>, the default action will replace every
instance of the text <code class="docutils literal notranslate"><span class="pre">latexindent.pl</span></code> with <code class="docutils literal notranslate"><span class="pre">pl.latexindent</span></code>.</p>
<p>Beginning with the code in <a class="reference internal" href="#lst-replace1"><span class="std std-numref">Listing 472</span></a> and running the command</p>
<div class="commandshell highlight-latex notranslate" id="index-1"><div class="highlight"><pre><span></span>latexindent.pl -r replace1.tex
</pre></div>
</div>
<p>gives the output given in <a class="reference internal" href="#lst-replace1-r1"><span class="std std-numref">Listing 473</span></a>.</p>
<div class="literal-block-wrapper docutils container" id="lst-replace1">
<div class="code-block-caption"><span class="caption-number">Listing 472 </span><span class="caption-text"><code class="docutils literal notranslate"><span class="pre">replace1.tex</span></code></span><a class="headerlink" href="#lst-replace1" title="Permalink to this code">¶</a></div>
<div class="tex highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Before</span> <span class="n">text</span><span class="p">,</span> <span class="n">latexindent</span><span class="o">.</span><span class="n">pl</span><span class="p">,</span>
<span class="n">after</span> <span class="n">text</span><span class="o">.</span>
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="lst-replace1-r1">
<div class="code-block-caption"><span class="caption-number">Listing 473 </span><span class="caption-text"><code class="docutils literal notranslate"><span class="pre">replace1.tex</span></code> default</span><a class="headerlink" href="#lst-replace1-r1" title="Permalink to this code">¶</a></div>
<div class="tex highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Before</span> <span class="n">text</span><span class="p">,</span> <span class="n">pl</span><span class="o">.</span><span class="n">latexindent</span><span class="p">,</span>
<span class="n">after</span> <span class="n">text</span><span class="o">.</span>
</pre></div>
</div>
</div>
<p>If we don’t wish to perform this replacement, then we can tweak the default settings of <a class="reference internal" href="#lst-replacements"><span class="std std-numref">Listing 471</span></a> by changing <code class="docutils literal notranslate"><span class="pre">lookForThis</span></code> to 0; we perform this action in
<a class="reference internal" href="#lst-replace1-yaml"><span class="std std-numref">Listing 475</span></a>, and run the command</p>
<span class="target" id="index-2"></span><div class="commandshell highlight-latex notranslate" id="index-3"><div class="highlight"><pre><span></span>latexindent.pl -r replace1.tex -l=replace1.yaml
</pre></div>
</div>
<p>which gives the output in <a class="reference internal" href="#lst-replace1-mod1"><span class="std std-numref">Listing 474</span></a>.</p>
<div class="literal-block-wrapper docutils container" id="lst-replace1-mod1">
<div class="code-block-caption"><span class="caption-number">Listing 474 </span><span class="caption-text"><code class="docutils literal notranslate"><span class="pre">replace1.tex</span></code> using <a class="reference internal" href="#lst-replace1-yaml"><span class="std std-numref">Listing 475</span></a></span><a class="headerlink" href="#lst-replace1-mod1" title="Permalink to this code">¶</a></div>
<div class="tex highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Before</span> <span class="n">text</span><span class="p">,</span> <span class="n">latexindent</span><span class="o">.</span><span class="n">pl</span><span class="p">,</span>
<span class="n">after</span> <span class="n">text</span><span class="o">.</span>
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="lst-replace1-yaml">
<div class="code-block-caption"><span class="caption-number">Listing 475 </span><span class="caption-text"><code class="docutils literal notranslate"><span class="pre">replace1.yaml</span></code></span><a class="headerlink" href="#lst-replace1-yaml" title="Permalink to this code">¶</a></div>
<div class="replaceyaml highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">replacements</span><span class="p">:</span>
  <span class="o">-</span> 
    <span class="n">amalgamate</span><span class="p">:</span> <span class="mi">0</span>
  <span class="o">-</span>
    <span class="n">this</span><span class="p">:</span> <span class="n">latexindent</span><span class="o">.</span><span class="n">pl</span>
    <span class="n">that</span><span class="p">:</span> <span class="n">pl</span><span class="o">.</span><span class="n">latexindent</span>
    <span class="n">lookForThis</span><span class="p">:</span> <span class="mi">0</span>
</pre></div>
</div>
</div>
<p>Note that in <a class="reference internal" href="#lst-replace1-yaml"><span class="std std-numref">Listing 475</span></a> we have specified <code class="docutils literal notranslate"><span class="pre">amalgamate</span></code> as 0 so that the default replacements are overwritten.</p>
<p>We haven’t yet discussed the <code class="docutils literal notranslate"><span class="pre">when</span></code> field; don’t worry, we’ll get to it as part of the discussion in what follows.</p>
</div>
<div class="section" id="the-two-types-of-replacements">
<h2>7.2. The two types of replacements<a class="headerlink" href="#the-two-types-of-replacements" title="Permalink to this headline">¶</a></h2>
<p>There are two types of replacements:</p>
<ol class="arabic">
<li><p class="first"><em>string</em>-based replacements, which replace the string in <em>this</em> with the string in <em>that</em>. If you specify <code class="docutils literal notranslate"><span class="pre">this</span></code> and you do not specify <code class="docutils literal notranslate"><span class="pre">that</span></code>, then the <code class="docutils literal notranslate"><span class="pre">that</span></code> field will be assumed to be
empty.</p>
</li>
<li id="index-4"><p class="first"><em>regex</em>-based replacements, which use the <code class="docutils literal notranslate"><span class="pre">substitution</span></code> field.</p>
</li>
</ol>
<p>We will demonstrate both in the examples that follow.</p>
<p><code class="docutils literal notranslate"><span class="pre">latexindent.pl</span></code> chooses which type of replacement to make based on which fields have been specified; if the <code class="docutils literal notranslate"><span class="pre">this</span></code> field is specified, then it will make <em>string</em>-based replacements, regardless of
if <code class="docutils literal notranslate"><span class="pre">substitution</span></code> is present or not.</p>
</div>
<div class="section" id="examples-of-replacements">
<h2>7.3. Examples of replacements<a class="headerlink" href="#examples-of-replacements" title="Permalink to this headline">¶</a></h2>
<div class="proof proof-type-example" id="id2">

    <div class="proof-title">
        <span class="proof-type">Example 1</span>
        
    </div><div class="proof-content">
<p>We begin with code given in <a class="reference internal" href="#lst-colsep"><span class="std std-numref">Listing 476</span></a></p>
<div class="literal-block-wrapper docutils container" id="lst-colsep">
<div class="code-block-caption"><span class="caption-number">Listing 476 </span><span class="caption-text"><code class="docutils literal notranslate"><span class="pre">colsep.tex</span></code></span><a class="headerlink" href="#lst-colsep" title="Permalink to this code">¶</a></div>
<div class="tex highlight-default notranslate"><div class="highlight"><pre><span></span>\<span class="n">begin</span><span class="p">{</span><span class="n">env</span><span class="p">}</span>
<span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span>\<span class="n">arraycolsep</span><span class="o">=</span><span class="mi">3</span><span class="n">pt</span>
<span class="mi">4</span> <span class="mi">5</span> <span class="mi">6</span>\<span class="n">arraycolsep</span><span class="o">=</span><span class="mi">5</span><span class="n">pt</span>
\<span class="n">end</span><span class="p">{</span><span class="n">env</span><span class="p">}</span>
</pre></div>
</div>
</div>
<p>Let’s assume that our goal is to remove both of the <code class="docutils literal notranslate"><span class="pre">arraycolsep</span></code> statements; we can achieve this in a few different ways.</p>
<p>Using the YAML in <a class="reference internal" href="#lst-colsep-yaml"><span class="std std-numref">Listing 478</span></a>, and running the command</p>
<span class="target" id="index-5"></span><div class="commandshell highlight-latex notranslate" id="index-6"><div class="highlight"><pre><span></span>latexindent.pl -r colsep.tex -l=colsep.yaml
</pre></div>
</div>
<p>then we achieve the output in <a class="reference internal" href="#lst-colsep-mod0"><span class="std std-numref">Listing 477</span></a>.</p>
<div class="literal-block-wrapper docutils container" id="lst-colsep-mod0">
<div class="code-block-caption"><span class="caption-number">Listing 477 </span><span class="caption-text"><code class="docutils literal notranslate"><span class="pre">colsep.tex</span></code> using <a class="reference internal" href="#lst-colsep"><span class="std std-numref">Listing 476</span></a></span><a class="headerlink" href="#lst-colsep-mod0" title="Permalink to this code">¶</a></div>
<div class="tex highlight-default notranslate"><div class="highlight"><pre><span></span>\<span class="n">begin</span><span class="p">{</span><span class="n">env</span><span class="p">}</span>
	<span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span>
	<span class="mi">4</span> <span class="mi">5</span> <span class="mi">6</span>
\<span class="n">end</span><span class="p">{</span><span class="n">env</span><span class="p">}</span>
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="lst-colsep-yaml">
<div class="code-block-caption"><span class="caption-number">Listing 478 </span><span class="caption-text"><code class="docutils literal notranslate"><span class="pre">colsep.yaml</span></code></span><a class="headerlink" href="#lst-colsep-yaml" title="Permalink to this code">¶</a></div>
<div class="replaceyaml highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">replacements</span><span class="p">:</span>
  <span class="o">-</span>
    <span class="n">this</span><span class="p">:</span> \<span class="n">arraycolsep</span><span class="o">=</span><span class="mi">3</span><span class="n">pt</span>
  <span class="o">-</span>
    <span class="n">this</span><span class="p">:</span> \<span class="n">arraycolsep</span><span class="o">=</span><span class="mi">5</span><span class="n">pt</span>
</pre></div>
</div>
</div>
<p>Note that in <a class="reference internal" href="#lst-colsep-yaml"><span class="std std-numref">Listing 478</span></a>, we have specified <em>two</em> separate fields, each with their own ‘<em>this</em>’ field; furthermore, for both of the separate fields, we have not specified ‘<code class="docutils literal notranslate"><span class="pre">that</span></code>’,
so the <code class="docutils literal notranslate"><span class="pre">that</span></code> field is assumed to be blank by <code class="docutils literal notranslate"><span class="pre">latexindent.pl</span></code>;</p>
<p>We can make the YAML in <a class="reference internal" href="#lst-colsep-yaml"><span class="std std-numref">Listing 478</span></a> more concise by exploring the <code class="docutils literal notranslate"><span class="pre">substitution</span></code> field. Using the settings in <a class="reference internal" href="#lst-colsep1"><span class="std std-numref">Listing 480</span></a> and running the command</p>
<span class="target" id="index-7"></span><div class="commandshell highlight-latex notranslate" id="index-8"><div class="highlight"><pre><span></span>latexindent.pl -r colsep.tex -l=colsep1.yaml
</pre></div>
</div>
<p>then we achieve the output in <a class="reference internal" href="#lst-colsep-mod1"><span class="std std-numref">Listing 479</span></a>.</p>
<span class="target" id="index-9"></span><div class="literal-block-wrapper docutils container" id="lst-colsep-mod1">
<span id="index-10"></span><div class="code-block-caption"><span class="caption-number">Listing 479 </span><span class="caption-text"><code class="docutils literal notranslate"><span class="pre">colsep.tex</span></code> using <a class="reference internal" href="#lst-colsep1"><span class="std std-numref">Listing 480</span></a></span><a class="headerlink" href="#lst-colsep-mod1" title="Permalink to this code">¶</a></div>
<div class="tex highlight-default notranslate"><div class="highlight"><pre><span></span>\<span class="n">begin</span><span class="p">{</span><span class="n">env</span><span class="p">}</span>
	<span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span>
	<span class="mi">4</span> <span class="mi">5</span> <span class="mi">6</span>
\<span class="n">end</span><span class="p">{</span><span class="n">env</span><span class="p">}</span>
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="lst-colsep1">
<div class="code-block-caption"><span class="caption-number">Listing 480 </span><span class="caption-text"><code class="docutils literal notranslate"><span class="pre">colsep1.yaml</span></code></span><a class="headerlink" href="#lst-colsep1" title="Permalink to this code">¶</a></div>
<div class="replaceyaml highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">replacements</span><span class="p">:</span>
  <span class="o">-</span>
    <span class="n">substitution</span><span class="p">:</span> <span class="n">s</span><span class="o">/</span>\\<span class="n">arraycolsep</span><span class="o">=</span>\<span class="n">d</span><span class="o">+</span><span class="n">pt</span><span class="o">//</span><span class="n">sg</span>
</pre></div>
</div>
</div>
<p>The code given in <a class="reference internal" href="#lst-colsep1"><span class="std std-numref">Listing 480</span></a> is an example of a <em>regular expression</em>, which we may abbreviate to <em>regex</em> in what follows. This manual is not intended to be a tutorial on regular
expressions; you might like to read, for example, (Friedl, n.d.) for a detailed covering of the topic. With reference to <a class="reference internal" href="#lst-colsep1"><span class="std std-numref">Listing 480</span></a>, we do note the following:</p>
<ul class="simple">
<li>the general form of the <code class="docutils literal notranslate"><span class="pre">substitution</span></code> field is <code class="docutils literal notranslate"><span class="pre">s/regex/replacement/modifiers</span></code>. You can place any regular expression you like within this;</li>
<li>we have ‘escaped’ the backslash by using <code class="docutils literal notranslate"><span class="pre">\\</span></code></li>
<li>we have used <code class="docutils literal notranslate"><span class="pre">\d+</span></code> to represent <em>at least</em> one digit</li>
<li>the <code class="docutils literal notranslate"><span class="pre">s</span></code> <em>modifier</em> (in the <code class="docutils literal notranslate"><span class="pre">sg</span></code> at the end of the line) instructs <code class="docutils literal notranslate"><span class="pre">latexindent.pl</span></code> to treat your file as one single line;</li>
<li>the <code class="docutils literal notranslate"><span class="pre">g</span></code> <em>modifier</em> (in the <code class="docutils literal notranslate"><span class="pre">sg</span></code> at the end of the line) instructs <code class="docutils literal notranslate"><span class="pre">latexindent.pl</span></code> to make the substitution <em>globally</em> throughout your file; you might try removing the <code class="docutils literal notranslate"><span class="pre">g</span></code> modifier from
<a class="reference internal" href="#lst-colsep1"><span class="std std-numref">Listing 480</span></a> and observing the difference in output.</li>
</ul>
<p>You might like to see <a class="reference external" href="https://perldoc.perl.org/perlre.html#Modifiers">https://perldoc.perl.org/perlre.html#Modifiers</a> for details of modifiers; in general, I recommend starting with the <code class="docutils literal notranslate"><span class="pre">sg</span></code> modifiers for this feature.</p>
</div></div><div class="proof proof-type-example" id="id3">

    <div class="proof-title">
        <span class="proof-type">Example 2</span>
        
    </div><div class="proof-content">
<p>We’ll keep working with the file in <a class="reference internal" href="#lst-colsep"><span class="std std-numref">Listing 476</span></a> for this example.</p>
<p>Using the YAML in <a class="reference internal" href="#lst-multi-line"><span class="std std-numref">Listing 482</span></a>, and running the command</p>
<span class="target" id="index-11"></span><div class="commandshell highlight-latex notranslate" id="index-12"><div class="highlight"><pre><span></span>latexindent.pl -r colsep.tex -l=multi-line.yaml
</pre></div>
</div>
<p>then we achieve the output in <a class="reference internal" href="#lst-colsep-mod2"><span class="std std-numref">Listing 481</span></a>.</p>
<div class="literal-block-wrapper docutils container" id="lst-colsep-mod2">
<div class="code-block-caption"><span class="caption-number">Listing 481 </span><span class="caption-text"><code class="docutils literal notranslate"><span class="pre">colsep.tex</span></code> using <a class="reference internal" href="#lst-multi-line"><span class="std std-numref">Listing 482</span></a></span><a class="headerlink" href="#lst-colsep-mod2" title="Permalink to this code">¶</a></div>
<div class="tex highlight-default notranslate"><div class="highlight"><pre><span></span>multi-line!
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="lst-multi-line">
<div class="code-block-caption"><span class="caption-number">Listing 482 </span><span class="caption-text"><code class="docutils literal notranslate"><span class="pre">multi-line.yaml</span></code></span><a class="headerlink" href="#lst-multi-line" title="Permalink to this code">¶</a></div>
<div class="replaceyaml highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">replacements</span><span class="p">:</span>
  <span class="o">-</span>
    <span class="n">this</span><span class="p">:</span> <span class="o">|-</span>
     \<span class="n">begin</span><span class="p">{</span><span class="n">env</span><span class="p">}</span>
     <span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span>\<span class="n">arraycolsep</span><span class="o">=</span><span class="mi">3</span><span class="n">pt</span>
     <span class="mi">4</span> <span class="mi">5</span> <span class="mi">6</span>\<span class="n">arraycolsep</span><span class="o">=</span><span class="mi">5</span><span class="n">pt</span>
     \<span class="n">end</span><span class="p">{</span><span class="n">env</span><span class="p">}</span>
    <span class="n">that</span><span class="p">:</span> <span class="s1">&#39;multi-line!&#39;</span>
</pre></div>
</div>
</div>
<p>With reference to <a class="reference internal" href="#lst-multi-line"><span class="std std-numref">Listing 482</span></a>, we have specified a <em>multi-line</em> version of <code class="docutils literal notranslate"><span class="pre">this</span></code> by employing the <em>literal</em> YAML style <code class="docutils literal notranslate"><span class="pre">|-</span></code>. See, for example,
<a class="reference external" href="https://stackoverflow.com/questions/3790454/in-yaml-how-do-i-break-a-string-over-multiple-lines">https://stackoverflow.com/questions/3790454/in-yaml-how-do-i-break-a-string-over-multiple-lines</a> for further options, all of which can be used in your YAML file.</p>
<p>This is a natural point to explore the <code class="docutils literal notranslate"><span class="pre">when</span></code> field, specified in <a class="reference internal" href="#lst-replacements"><span class="std std-numref">Listing 471</span></a>. This field can take two values: <em>before</em> and <em>after</em>, which respectively instruct <code class="docutils literal notranslate"><span class="pre">latexindent.pl</span></code>
to perform the replacements <em>before</em> indentation or <em>after</em> it. The default value is <code class="docutils literal notranslate"><span class="pre">before</span></code>.</p>
<p>Using the YAML in <a class="reference internal" href="#lst-multi-line1"><span class="std std-numref">Listing 484</span></a>, and running the command</p>
<span class="target" id="index-13"></span><div class="commandshell highlight-latex notranslate" id="index-14"><div class="highlight"><pre><span></span>latexindent.pl -r colsep.tex -l=multi-line1.yaml
</pre></div>
</div>
<p>then we achieve the output in <a class="reference internal" href="#lst-colsep-mod3"><span class="std std-numref">Listing 483</span></a>.</p>
<div class="literal-block-wrapper docutils container" id="lst-colsep-mod3">
<div class="code-block-caption"><span class="caption-number">Listing 483 </span><span class="caption-text"><code class="docutils literal notranslate"><span class="pre">colsep.tex</span></code> using <a class="reference internal" href="#lst-multi-line1"><span class="std std-numref">Listing 484</span></a></span><a class="headerlink" href="#lst-colsep-mod3" title="Permalink to this code">¶</a></div>
<div class="tex highlight-default notranslate"><div class="highlight"><pre><span></span>\<span class="n">begin</span><span class="p">{</span><span class="n">env</span><span class="p">}</span>
	<span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span>\<span class="n">arraycolsep</span><span class="o">=</span><span class="mi">3</span><span class="n">pt</span>
	<span class="mi">4</span> <span class="mi">5</span> <span class="mi">6</span>\<span class="n">arraycolsep</span><span class="o">=</span><span class="mi">5</span><span class="n">pt</span>
\<span class="n">end</span><span class="p">{</span><span class="n">env</span><span class="p">}</span>
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="lst-multi-line1">
<div class="code-block-caption"><span class="caption-number">Listing 484 </span><span class="caption-text"><code class="docutils literal notranslate"><span class="pre">multi-line1.yaml</span></code></span><a class="headerlink" href="#lst-multi-line1" title="Permalink to this code">¶</a></div>
<div class="replaceyaml highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">replacements</span><span class="p">:</span>
  <span class="o">-</span>
    <span class="n">this</span><span class="p">:</span> <span class="o">|-</span>
     \<span class="n">begin</span><span class="p">{</span><span class="n">env</span><span class="p">}</span>
     <span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span>\<span class="n">arraycolsep</span><span class="o">=</span><span class="mi">3</span><span class="n">pt</span>
     <span class="mi">4</span> <span class="mi">5</span> <span class="mi">6</span>\<span class="n">arraycolsep</span><span class="o">=</span><span class="mi">5</span><span class="n">pt</span>
     \<span class="n">end</span><span class="p">{</span><span class="n">env</span><span class="p">}</span>
    <span class="n">that</span><span class="p">:</span> <span class="s1">&#39;multi-line!&#39;</span>
    <span class="n">when</span><span class="p">:</span> <span class="n">after</span>
</pre></div>
</div>
</div>
<p>We note that, because we have specified <code class="docutils literal notranslate"><span class="pre">when:</span> <span class="pre">after</span></code>, that <code class="docutils literal notranslate"><span class="pre">latexindent.pl</span></code> has not found the string specified in <a class="reference internal" href="#lst-multi-line1"><span class="std std-numref">Listing 484</span></a> within the file in <a class="reference internal" href="#lst-colsep"><span class="std std-numref">Listing 476</span></a>. As it has
looked for the string within <a class="reference internal" href="#lst-multi-line1"><span class="std std-numref">Listing 484</span></a> <em>after</em> the indentation has been performed. After indentation, the string as written in <a class="reference internal" href="#lst-multi-line1"><span class="std std-numref">Listing 484</span></a> is no longer part of the
file, and has therefore not been replaced.</p>
<p>As a final note on this example, if you use the <code class="docutils literal notranslate"><span class="pre">-rr</span></code> switch, as follows,</p>
<span class="target" id="index-15"></span><div class="commandshell highlight-latex notranslate" id="index-16"><div class="highlight"><pre><span></span>latexindent.pl -rr colsep.tex -l=multi-line1.yaml
</pre></div>
</div>
<p>then the <code class="docutils literal notranslate"><span class="pre">when</span></code> field is ignored, no indentation is done, and the output is as in <a class="reference internal" href="#lst-colsep-mod2"><span class="std std-numref">Listing 481</span></a>.</p>
</div></div><div class="proof proof-type-example" id="id4">

    <div class="proof-title">
        <span class="proof-type">Example 3</span>
        
    </div><div class="proof-content">
<p>An important part of the substitution routine is in <em>capture groups</em>.</p>
<p>Assuming that we start with the code in <a class="reference internal" href="#lst-displaymath"><span class="std std-numref">Listing 485</span></a>, let’s assume that our goal is to replace each occurrence of <code class="docutils literal notranslate"><span class="pre">$$...$$</span></code> with <code class="docutils literal notranslate"><span class="pre">\begin{equation*}...\end{equation*}</span></code>. This example
is partly motivated by <a class="reference external" href="https://tex.stackexchange.com/questions/242150/good-looking-latex-code">tex stackexchange question 242150</a>.</p>
<div class="literal-block-wrapper docutils container" id="lst-displaymath">
<div class="code-block-caption"><span class="caption-number">Listing 485 </span><span class="caption-text"><code class="docutils literal notranslate"><span class="pre">displaymath.tex</span></code></span><a class="headerlink" href="#lst-displaymath" title="Permalink to this code">¶</a></div>
<div class="tex highlight-default notranslate"><div class="highlight"><pre><span></span>before text $$a^2+b^2=4$$ and $$c^2$$

$$
d^2+e^2 = f^2
$$
and also $$ g^2
$$ and some inline math: $h^2$
</pre></div>
</div>
</div>
<p>We use the settings in <a class="reference internal" href="#lst-displaymath1"><span class="std std-numref">Listing 487</span></a> and run the command</p>
<span class="target" id="index-17"></span><div class="commandshell highlight-latex notranslate" id="index-18"><div class="highlight"><pre><span></span>latexindent.pl -r displaymath.tex -l=displaymath1.yaml
</pre></div>
</div>
<p>to receive the output given in <a class="reference internal" href="#lst-displaymath-mod1"><span class="std std-numref">Listing 486</span></a>.</p>
<div class="literal-block-wrapper docutils container" id="lst-displaymath-mod1">
<span id="index-19"></span><div class="code-block-caption"><span class="caption-number">Listing 486 </span><span class="caption-text"><code class="docutils literal notranslate"><span class="pre">displaymath.tex</span></code> using <a class="reference internal" href="#lst-displaymath1"><span class="std std-numref">Listing 487</span></a></span><a class="headerlink" href="#lst-displaymath-mod1" title="Permalink to this code">¶</a></div>
<div class="tex highlight-default notranslate"><div class="highlight"><pre><span></span>before text \begin{equation*}a^2+b^2=4\end{equation*} and \begin{equation*}c^2\end{equation*}

\begin{equation*}
	d^2+e^2 = f^2
\end{equation*}
and also \begin{equation*} g^2
\end{equation*} and some inline math: $h^2$
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="lst-displaymath1">
<div class="code-block-caption"><span class="caption-number">Listing 487 </span><span class="caption-text"><code class="docutils literal notranslate"><span class="pre">displaymath1.yaml</span></code></span><a class="headerlink" href="#lst-displaymath1" title="Permalink to this code">¶</a></div>
<div class="replaceyaml highlight-default notranslate"><div class="highlight"><pre><span></span>replacements:
  -
    substitution: |-
     s/\$\$
       (.*?)
       \$\$/\\begin{equation*}$1\\end{equation*}/sgx
</pre></div>
</div>
</div>
<p>A few notes about <a class="reference internal" href="#lst-displaymath1"><span class="std std-numref">Listing 487</span></a>:</p>
<ol class="arabic simple">
<li>we have used the <code class="docutils literal notranslate"><span class="pre">x</span></code> modifier, which allows us to have white space within the regex;</li>
<li>we have used a capture group, <code class="docutils literal notranslate"><span class="pre">(.*?)</span></code> which captures the content between the <code class="docutils literal notranslate"><span class="pre">$$...$$</span></code> into the special variable, <code class="docutils literal notranslate"><span class="pre">$1</span></code>;</li>
<li>we have used the content of the capture group, <code class="docutils literal notranslate"><span class="pre">$1</span></code>, in the replacement text.</li>
</ol>
<p>See <a class="reference external" href="https://perldoc.perl.org/perlre.html#Capture-groups">https://perldoc.perl.org/perlre.html#Capture-groups</a> for a discussion of capture groups.</p>
<p>The features of the replacement switches can, of course, be combined with others from the toolkit of <code class="docutils literal notranslate"><span class="pre">latexindent.pl</span></code>. For example, we can combine the poly-switches of <a class="reference internal" href="sec-the-m-switch.html#sec-poly-switches"><span class="std std-numref">Section 6.6</span></a>,
which we do in <a class="reference internal" href="#lst-equation"><span class="std std-numref">Listing 489</span></a>; upon running the command</p>
<span class="target" id="index-20"></span><span class="target" id="index-21"></span><div class="commandshell highlight-latex notranslate" id="index-22"><div class="highlight"><pre><span></span>latexindent.pl -r -m displaymath.tex -l=displaymath1.yaml,equation.yaml
</pre></div>
</div>
<p>then we receive the output in <a class="reference internal" href="#lst-displaymath-mod2"><span class="std std-numref">Listing 488</span></a>.</p>
<div class="literal-block-wrapper docutils container" id="lst-displaymath-mod2">
<div class="code-block-caption"><span class="caption-number">Listing 488 </span><span class="caption-text"><code class="docutils literal notranslate"><span class="pre">displaymath.tex</span></code> using <a class="reference internal" href="#lst-displaymath1"><span class="std std-numref">Listing 487</span></a> and <a class="reference internal" href="#lst-equation"><span class="std std-numref">Listing 489</span></a></span><a class="headerlink" href="#lst-displaymath-mod2" title="Permalink to this code">¶</a></div>
<div class="tex highlight-default notranslate"><div class="highlight"><pre><span></span>before text%
\begin{equation*}%
	a^2+b^2=4%
\end{equation*}%
and%
\begin{equation*}%
	c^2%
\end{equation*}

\begin{equation*}
	d^2+e^2 = f^2
\end{equation*}
and also%
\begin{equation*}%
	g^2
\end{equation*}%
and some inline math: $h^2$
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="lst-equation">
<div class="code-block-caption"><span class="caption-number">Listing 489 </span><span class="caption-text"><code class="docutils literal notranslate"><span class="pre">equation.yaml</span></code></span><a class="headerlink" href="#lst-equation" title="Permalink to this code">¶</a></div>
<div class="mlbyaml highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">modifyLineBreaks</span><span class="p">:</span>
    <span class="n">environments</span><span class="p">:</span>
        <span class="n">equation</span><span class="o">*</span><span class="p">:</span>
            <span class="n">BeginStartsOnOwnLine</span><span class="p">:</span> <span class="mi">2</span>
            <span class="n">BodyStartsOnOwnLine</span><span class="p">:</span> <span class="mi">2</span>
            <span class="n">EndStartsOnOwnLine</span><span class="p">:</span> <span class="mi">2</span>
            <span class="n">EndFinishesWithLineBreak</span><span class="p">:</span> <span class="mi">2</span>
        
</pre></div>
</div>
</div>
</div></div><div class="proof proof-type-example" id="id5">

    <div class="proof-title">
        <span class="proof-type">Example 4</span>
        
    </div><div class="proof-content">
<p>This example is motivated by <a class="reference external" href="https://tex.stackexchange.com/questions/490086/bring-several-lines-together-to-fill-blank-spaces-in-texmaker">tex stackexchange question 490086</a>. We begin with the
code in <a class="reference internal" href="#lst-phrase"><span class="std std-numref">Listing 490</span></a>.</p>
<div class="literal-block-wrapper docutils container" id="lst-phrase">
<div class="code-block-caption"><span class="caption-number">Listing 490 </span><span class="caption-text"><code class="docutils literal notranslate"><span class="pre">phrase.tex</span></code></span><a class="headerlink" href="#lst-phrase" title="Permalink to this code">¶</a></div>
<div class="tex highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">phrase</span> <span class="mi">1</span>       <span class="n">phrase</span> <span class="mi">2</span> <span class="n">phrase</span> <span class="mi">3</span>             <span class="n">phrase</span> <span class="mi">100</span>

<span class="n">phrase</span> <span class="mi">1</span>       <span class="n">phrase</span> <span class="mi">2</span> <span class="n">phrase</span> <span class="mi">3</span>             <span class="n">phrase</span> <span class="mi">100</span>

<span class="n">phrase</span> <span class="mi">1</span>       <span class="n">phrase</span> <span class="mi">2</span> <span class="n">phrase</span> <span class="mi">3</span>             <span class="n">phrase</span> <span class="mi">100</span>

<span class="n">phrase</span> <span class="mi">1</span>       <span class="n">phrase</span> <span class="mi">2</span> <span class="n">phrase</span> <span class="mi">3</span>             <span class="n">phrase</span> <span class="mi">100</span>

</pre></div>
</div>
</div>
<p>Our goal is to make the spacing uniform between the phrases. To achieve this, we employ the settings in <a class="reference internal" href="#lst-hspace"><span class="std std-numref">Listing 492</span></a>, and run the command</p>
<span class="target" id="index-23"></span><div class="commandshell highlight-latex notranslate" id="index-24"><div class="highlight"><pre><span></span>latexindent.pl -r phrase.tex -l=hspace.yaml
</pre></div>
</div>
<p>which gives the output in <a class="reference internal" href="#lst-phrase-mod1"><span class="std std-numref">Listing 491</span></a>.</p>
<div class="literal-block-wrapper docutils container" id="lst-phrase-mod1">
<span id="index-25"></span><div class="code-block-caption"><span class="caption-number">Listing 491 </span><span class="caption-text"><code class="docutils literal notranslate"><span class="pre">phrase.tex</span></code> using <a class="reference internal" href="#lst-hspace"><span class="std std-numref">Listing 492</span></a></span><a class="headerlink" href="#lst-phrase-mod1" title="Permalink to this code">¶</a></div>
<div class="tex highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">phrase</span> <span class="mi">1</span> <span class="n">phrase</span> <span class="mi">2</span> <span class="n">phrase</span> <span class="mi">3</span> <span class="n">phrase</span> <span class="mi">100</span>

<span class="n">phrase</span> <span class="mi">1</span> <span class="n">phrase</span> <span class="mi">2</span> <span class="n">phrase</span> <span class="mi">3</span> <span class="n">phrase</span> <span class="mi">100</span>

<span class="n">phrase</span> <span class="mi">1</span> <span class="n">phrase</span> <span class="mi">2</span> <span class="n">phrase</span> <span class="mi">3</span> <span class="n">phrase</span> <span class="mi">100</span>

<span class="n">phrase</span> <span class="mi">1</span> <span class="n">phrase</span> <span class="mi">2</span> <span class="n">phrase</span> <span class="mi">3</span> <span class="n">phrase</span> <span class="mi">100</span>

</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="lst-hspace">
<div class="code-block-caption"><span class="caption-number">Listing 492 </span><span class="caption-text"><code class="docutils literal notranslate"><span class="pre">hspace.yaml</span></code></span><a class="headerlink" href="#lst-hspace" title="Permalink to this code">¶</a></div>
<div class="replaceyaml highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">replacements</span><span class="p">:</span>
  <span class="o">-</span>
    <span class="n">substitution</span><span class="p">:</span> <span class="n">s</span><span class="o">/</span>\<span class="n">h</span><span class="o">+/</span> <span class="o">/</span><span class="n">sg</span>
</pre></div>
</div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">\h+</span></code> setting in <a class="reference internal" href="#lst-hspace"><span class="std std-numref">Listing 492</span></a> say to replace <em>at least one horizontal space</em> with a single space.</p>
</div></div><div class="proof proof-type-example" id="id6">

    <div class="proof-title">
        <span class="proof-type">Example 5</span>
        
    </div><div class="proof-content">
<p>We begin with the code in <a class="reference internal" href="#lst-references"><span class="std std-numref">Listing 493</span></a>.</p>
<div class="literal-block-wrapper docutils container" id="lst-references">
<div class="code-block-caption"><span class="caption-number">Listing 493 </span><span class="caption-text"><code class="docutils literal notranslate"><span class="pre">references.tex</span></code></span><a class="headerlink" href="#lst-references" title="Permalink to this code">¶</a></div>
<div class="tex highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">equation</span> \<span class="n">eqref</span><span class="p">{</span><span class="n">eq</span><span class="p">:</span><span class="n">aa</span><span class="p">}</span> <span class="ow">and</span> <span class="n">Figure</span>  \<span class="n">ref</span><span class="p">{</span><span class="n">fig</span><span class="p">:</span><span class="n">bb</span><span class="p">}</span>
<span class="ow">and</span> <span class="n">table</span><span class="o">~</span>\<span class="n">ref</span><span class="p">{</span><span class="n">tab</span><span class="p">:</span><span class="n">cc</span><span class="p">}</span>
</pre></div>
</div>
</div>
<p>Our goal is to change each reference so that both the text and the reference are contained within one hyperlink. We achieve this by employing <a class="reference internal" href="#lst-reference"><span class="std std-numref">Listing 495</span></a> and running the command</p>
<span class="target" id="index-26"></span><div class="commandshell highlight-latex notranslate" id="index-27"><div class="highlight"><pre><span></span>latexindent.pl -r references.tex -l=reference.yaml
</pre></div>
</div>
<p>which gives the output in <a class="reference internal" href="#lst-references-mod1"><span class="std std-numref">Listing 494</span></a>.</p>
<div class="literal-block-wrapper docutils container" id="lst-references-mod1">
<div class="code-block-caption"><span class="caption-number">Listing 494 </span><span class="caption-text"><code class="docutils literal notranslate"><span class="pre">references.tex</span></code> using <a class="reference internal" href="#lst-reference"><span class="std std-numref">Listing 495</span></a></span><a class="headerlink" href="#lst-references-mod1" title="Permalink to this code">¶</a></div>
<div class="tex highlight-default notranslate"><div class="highlight"><pre><span></span>\<span class="n">hyperref</span><span class="p">{</span><span class="n">equation</span> \<span class="n">ref</span><span class="o">*</span><span class="p">{</span><span class="n">eq</span><span class="p">:</span><span class="n">aa</span><span class="p">}}</span> <span class="ow">and</span> \<span class="n">hyperref</span><span class="p">{</span><span class="n">Figure</span> \<span class="n">ref</span><span class="o">*</span><span class="p">{</span><span class="n">fig</span><span class="p">:</span><span class="n">bb</span><span class="p">}}</span>
<span class="ow">and</span> \<span class="n">hyperref</span><span class="p">{</span><span class="n">table</span> \<span class="n">ref</span><span class="o">*</span><span class="p">{</span><span class="n">tab</span><span class="p">:</span><span class="n">cc</span><span class="p">}}</span>
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="lst-reference">
<div class="code-block-caption"><span class="caption-number">Listing 495 </span><span class="caption-text"><code class="docutils literal notranslate"><span class="pre">reference.yaml</span></code></span><a class="headerlink" href="#lst-reference" title="Permalink to this code">¶</a></div>
<div class="replaceyaml highlight-default notranslate"><div class="highlight"><pre><span></span>replacements:
  -
    substitution: |-
      s/(
        equation
        |
        table
        |
        figure
        |
        section
      )
      (\h|~)*
      \\(?:eq)?
      ref\{(.*?)\}/\\hyperref{$1 \\ref\*{$3}}/sgxi
</pre></div>
</div>
</div>
<p>Referencing <a class="reference internal" href="#lst-reference"><span class="std std-numref">Listing 495</span></a>, the <code class="docutils literal notranslate"><span class="pre">|</span></code> means <em>or</em>, we have used <em>capture groups</em>, together with an example of an <em>optional</em> pattern, <code class="docutils literal notranslate"><span class="pre">(?:eq)?</span></code>.</p>
</div></div><div class="proof proof-type-example" id="id7">

    <div class="proof-title">
        <span class="proof-type">Example 6</span>
        
    </div><div class="proof-content">
<p>Let’s explore the three replacement mode switches (see <a class="reference internal" href="#tab-replacementswitches"><span class="std std-numref">Table 4</span></a>) in the context of an example that contains a verbatim code block, <a class="reference internal" href="#lst-verb1"><span class="std std-numref">Listing 496</span></a>; we will use the
settings in <a class="reference internal" href="#lst-verbatim1-yaml"><span class="std std-numref">Listing 497</span></a>.</p>
<div class="literal-block-wrapper docutils container" id="lst-verb1">
<div class="code-block-caption"><span class="caption-number">Listing 496 </span><span class="caption-text"><code class="docutils literal notranslate"><span class="pre">verb1.tex</span></code></span><a class="headerlink" href="#lst-verb1" title="Permalink to this code">¶</a></div>
<div class="tex highlight-default notranslate"><div class="highlight"><pre><span></span>\<span class="n">begin</span><span class="p">{</span><span class="n">myenv</span><span class="p">}</span>
<span class="n">body</span> <span class="n">of</span> <span class="n">verbatim</span>
\<span class="n">end</span><span class="p">{</span><span class="n">myenv</span><span class="p">}</span>
<span class="n">some</span> <span class="n">verbatim</span>
\<span class="n">begin</span><span class="p">{</span><span class="n">verbatim</span><span class="p">}</span>
    <span class="n">body</span>
        <span class="n">of</span>
      <span class="n">verbatim</span>
 <span class="n">text</span>
\<span class="n">end</span><span class="p">{</span><span class="n">verbatim</span><span class="p">}</span>
<span class="n">text</span>
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="lst-verbatim1-yaml">
<div class="code-block-caption"><span class="caption-number">Listing 497 </span><span class="caption-text"><code class="docutils literal notranslate"><span class="pre">verbatim1.yaml</span></code></span><a class="headerlink" href="#lst-verbatim1-yaml" title="Permalink to this code">¶</a></div>
<div class="replaceyaml highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">replacements</span><span class="p">:</span>
  <span class="o">-</span>
    <span class="n">this</span><span class="p">:</span> <span class="s1">&#39;body&#39;</span>
    <span class="n">that</span><span class="p">:</span> <span class="s1">&#39;head&#39;</span>
</pre></div>
</div>
</div>
<p>Upon running the following commands,</p>
<span class="target" id="index-28"></span><span class="target" id="index-29"></span><span class="target" id="index-30"></span><span class="target" id="index-31"></span><span class="target" id="index-32"></span><div class="commandshell highlight-latex notranslate" id="index-33"><div class="highlight"><pre><span></span>latexindent.pl -r verb1.tex -l=verbatim1.yaml -o=+mod1
latexindent.pl -rv verb1.tex -l=verbatim1.yaml -o=+-rv-mod1
latexindent.pl -rr verb1.tex -l=verbatim1.yaml -o=+-rr-mod1
</pre></div>
</div>
<p>we receive the respective output in <a class="reference internal" href="#lst-verb1-mod1"><span class="std std-numref">Listing 498</span></a> – <a class="reference internal" href="#lst-verb1-rr-mod1"><span class="std std-numref">Listing 500</span></a></p>
<div class="literal-block-wrapper docutils container" id="lst-verb1-mod1">
<div class="code-block-caption"><span class="caption-number">Listing 498 </span><span class="caption-text"><code class="docutils literal notranslate"><span class="pre">verb1-mod1.tex</span></code></span><a class="headerlink" href="#lst-verb1-mod1" title="Permalink to this code">¶</a></div>
<div class="tex highlight-default notranslate"><div class="highlight"><pre><span></span>\<span class="n">begin</span><span class="p">{</span><span class="n">myenv</span><span class="p">}</span>
	<span class="n">head</span> <span class="n">of</span> <span class="n">verbatim</span>
\<span class="n">end</span><span class="p">{</span><span class="n">myenv</span><span class="p">}</span>
<span class="n">some</span> <span class="n">verbatim</span>
\<span class="n">begin</span><span class="p">{</span><span class="n">verbatim</span><span class="p">}</span>
    <span class="n">head</span>
        <span class="n">of</span>
      <span class="n">verbatim</span>
 <span class="n">text</span>
\<span class="n">end</span><span class="p">{</span><span class="n">verbatim</span><span class="p">}</span>
<span class="n">text</span>
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="lst-verb1-rv-mod1">
<div class="code-block-caption"><span class="caption-number">Listing 499 </span><span class="caption-text"><code class="docutils literal notranslate"><span class="pre">verb1-rv-mod1.tex</span></code></span><a class="headerlink" href="#lst-verb1-rv-mod1" title="Permalink to this code">¶</a></div>
<div class="tex highlight-default notranslate"><div class="highlight"><pre><span></span>\<span class="n">begin</span><span class="p">{</span><span class="n">myenv</span><span class="p">}</span>
	<span class="n">head</span> <span class="n">of</span> <span class="n">verbatim</span>
\<span class="n">end</span><span class="p">{</span><span class="n">myenv</span><span class="p">}</span>
<span class="n">some</span> <span class="n">verbatim</span>
\<span class="n">begin</span><span class="p">{</span><span class="n">verbatim</span><span class="p">}</span>
    <span class="n">body</span>
        <span class="n">of</span>
      <span class="n">verbatim</span>
 <span class="n">text</span>
\<span class="n">end</span><span class="p">{</span><span class="n">verbatim</span><span class="p">}</span>
<span class="n">text</span>
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="lst-verb1-rr-mod1">
<div class="code-block-caption"><span class="caption-number">Listing 500 </span><span class="caption-text"><code class="docutils literal notranslate"><span class="pre">verb1-rr-mod1.tex</span></code></span><a class="headerlink" href="#lst-verb1-rr-mod1" title="Permalink to this code">¶</a></div>
<div class="tex highlight-default notranslate"><div class="highlight"><pre><span></span>\<span class="n">begin</span><span class="p">{</span><span class="n">myenv</span><span class="p">}</span>
<span class="n">head</span> <span class="n">of</span> <span class="n">verbatim</span>
\<span class="n">end</span><span class="p">{</span><span class="n">myenv</span><span class="p">}</span>
<span class="n">some</span> <span class="n">verbatim</span>
\<span class="n">begin</span><span class="p">{</span><span class="n">verbatim</span><span class="p">}</span>
    <span class="n">head</span>
        <span class="n">of</span>
      <span class="n">verbatim</span>
 <span class="n">text</span>
\<span class="n">end</span><span class="p">{</span><span class="n">verbatim</span><span class="p">}</span>
<span class="n">text</span>
</pre></div>
</div>
</div>
</div></div><p>We note that:</p>
<ol class="arabic simple">
<li>in <a class="reference internal" href="#lst-verb1-mod1"><span class="std std-numref">Listing 498</span></a> indentation has been performed, and that the replacements specified in <a class="reference internal" href="#lst-verbatim1-yaml"><span class="std std-numref">Listing 497</span></a> have been performed, even within the verbatim code block;</li>
<li>in <a class="reference internal" href="#lst-verb1-rv-mod1"><span class="std std-numref">Listing 499</span></a> indentation has been performed, but that the replacements have <em>not</em> been performed within the verbatim environment, because the <code class="docutils literal notranslate"><span class="pre">rv</span></code> switch is active;</li>
<li>in <a class="reference internal" href="#lst-verb1-rr-mod1"><span class="std std-numref">Listing 500</span></a> indentation has <em>not</em> been performed, but that replacements have been performed, not respecting the verbatim code block.</li>
</ol>
<p>See the summary within <a class="reference internal" href="#tab-replacementswitches"><span class="std std-numref">Table 4</span></a>.</p>
<div class="proof proof-type-example" id="id8">

    <div class="proof-title">
        <span class="proof-type">Example 7</span>
        
    </div><div class="proof-content">
<p>Let’s explore the <code class="docutils literal notranslate"><span class="pre">amalgamate</span></code> field from <a class="reference internal" href="#lst-replacements"><span class="std std-numref">Listing 471</span></a> in the context of the file specified in <a class="reference internal" href="#lst-amalg1"><span class="std std-numref">Listing 501</span></a>.</p>
<div class="literal-block-wrapper docutils container" id="lst-amalg1">
<div class="code-block-caption"><span class="caption-number">Listing 501 </span><span class="caption-text"><code class="docutils literal notranslate"><span class="pre">amalg1.tex</span></code></span><a class="headerlink" href="#lst-amalg1" title="Permalink to this code">¶</a></div>
<div class="tex highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">one</span> <span class="n">two</span> <span class="n">three</span>
</pre></div>
</div>
</div>
<p>Let’s consider the YAML files given in <a class="reference internal" href="#lst-amalg1-yaml"><span class="std std-numref">Listing 502</span></a> – <a class="reference internal" href="#lst-amalg3-yaml"><span class="std std-numref">Listing 504</span></a>.</p>
<div class="literal-block-wrapper docutils container" id="lst-amalg1-yaml">
<div class="code-block-caption"><span class="caption-number">Listing 502 </span><span class="caption-text"><code class="docutils literal notranslate"><span class="pre">amalg1-yaml.yaml</span></code></span><a class="headerlink" href="#lst-amalg1-yaml" title="Permalink to this code">¶</a></div>
<div class="replaceyaml highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">replacements</span><span class="p">:</span>
  <span class="o">-</span>
    <span class="n">this</span><span class="p">:</span> <span class="n">one</span>
    <span class="n">that</span><span class="p">:</span> <span class="mi">1</span>
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="lst-amalg2-yaml">
<div class="code-block-caption"><span class="caption-number">Listing 503 </span><span class="caption-text"><code class="docutils literal notranslate"><span class="pre">amalg2-yaml.yaml</span></code></span><a class="headerlink" href="#lst-amalg2-yaml" title="Permalink to this code">¶</a></div>
<div class="replaceyaml highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">replacements</span><span class="p">:</span>
  <span class="o">-</span>
    <span class="n">this</span><span class="p">:</span> <span class="n">two</span>
    <span class="n">that</span><span class="p">:</span> <span class="mi">2</span>
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="lst-amalg3-yaml">
<div class="code-block-caption"><span class="caption-number">Listing 504 </span><span class="caption-text"><code class="docutils literal notranslate"><span class="pre">amalg3-yaml.yaml</span></code></span><a class="headerlink" href="#lst-amalg3-yaml" title="Permalink to this code">¶</a></div>
<div class="replaceyaml highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">replacements</span><span class="p">:</span>
  <span class="o">-</span> 
    <span class="n">amalgamate</span><span class="p">:</span> <span class="mi">0</span>
  <span class="o">-</span>
    <span class="n">this</span><span class="p">:</span> <span class="n">three</span>
    <span class="n">that</span><span class="p">:</span> <span class="mi">3</span>
</pre></div>
</div>
</div>
<p>Upon running the following commands,</p>
<span class="target" id="index-34"></span><div class="commandshell highlight-latex notranslate" id="index-35"><div class="highlight"><pre><span></span>latexindent.pl -r amalg1.tex -l=amalg1-yaml
latexindent.pl -r amalg1.tex -l=amalg1-yaml,amalg2-yaml
latexindent.pl -r amalg1.tex -l=amalg1-yaml,amalg2-yaml,amalg3-yaml
</pre></div>
</div>
<p>we receive the respective output in <a class="reference internal" href="#lst-amalg1-mod1"><span class="std std-numref">Listing 505</span></a> – <a class="reference internal" href="#lst-amalg1-mod123"><span class="std std-numref">Listing 507</span></a>.</p>
<div class="literal-block-wrapper docutils container" id="lst-amalg1-mod1">
<div class="code-block-caption"><span class="caption-number">Listing 505 </span><span class="caption-text"><code class="docutils literal notranslate"><span class="pre">amalg1.tex</span></code> using <a class="reference internal" href="#lst-amalg1-yaml"><span class="std std-numref">Listing 502</span></a></span><a class="headerlink" href="#lst-amalg1-mod1" title="Permalink to this code">¶</a></div>
<div class="tex highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">1</span> <span class="n">two</span> <span class="n">three</span>
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="lst-amalg1-mod12">
<div class="code-block-caption"><span class="caption-number">Listing 506 </span><span class="caption-text"><code class="docutils literal notranslate"><span class="pre">amalg1.tex</span></code> using <a class="reference internal" href="#lst-amalg1-yaml"><span class="std std-numref">Listing 502</span></a> and <a class="reference internal" href="#lst-amalg2-yaml"><span class="std std-numref">Listing 503</span></a></span><a class="headerlink" href="#lst-amalg1-mod12" title="Permalink to this code">¶</a></div>
<div class="tex highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">1</span> <span class="mi">2</span> <span class="n">three</span>
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="lst-amalg1-mod123">
<div class="code-block-caption"><span class="caption-number">Listing 507 </span><span class="caption-text"><code class="docutils literal notranslate"><span class="pre">amalg1.tex</span></code> using <a class="reference internal" href="#lst-amalg1-yaml"><span class="std std-numref">Listing 502</span></a> and <a class="reference internal" href="#lst-amalg2-yaml"><span class="std std-numref">Listing 503</span></a> and <a class="reference internal" href="#lst-amalg3-yaml"><span class="std std-numref">Listing 504</span></a></span><a class="headerlink" href="#lst-amalg1-mod123" title="Permalink to this code">¶</a></div>
<div class="tex highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">one</span> <span class="n">two</span> <span class="mi">3</span>
</pre></div>
</div>
</div>
<p>We note that:</p>
<ol class="arabic simple">
<li>in <a class="reference internal" href="#lst-amalg1-mod1"><span class="std std-numref">Listing 505</span></a> the replacements from <a class="reference internal" href="#lst-amalg1-yaml"><span class="std std-numref">Listing 502</span></a> have been used;</li>
<li>in <a class="reference internal" href="#lst-amalg1-mod12"><span class="std std-numref">Listing 506</span></a> the replacements from <a class="reference internal" href="#lst-amalg1-yaml"><span class="std std-numref">Listing 502</span></a> and <a class="reference internal" href="#lst-amalg2-yaml"><span class="std std-numref">Listing 503</span></a> have <em>both</em> been used, because the default value of <code class="docutils literal notranslate"><span class="pre">amalgamate</span></code> is 1;</li>
<li>in <a class="reference internal" href="#lst-amalg1-mod123"><span class="std std-numref">Listing 507</span></a> <em>only</em> the replacements from <a class="reference internal" href="#lst-amalg3-yaml"><span class="std std-numref">Listing 504</span></a> have been used, because the value of <code class="docutils literal notranslate"><span class="pre">amalgamate</span></code> has been set to 0.</li>
</ol>
</div></div><div class="references docutils container" id="refs">
<div class="docutils container" id="ref-masteringregexp">
Friedl, Jeffrey E. F. n.d. <em>Mastering Regular Expressions</em>.</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="sec-the-line-switch.html" class="btn btn-neutral float-right" title="8. The –lines switch" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="sec-the-m-switch.html" class="btn btn-neutral float-left" title="6. The -m (modifylinebreaks) switch" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2018, Chris Hughes.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>